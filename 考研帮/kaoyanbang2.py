#coding:utf-8
import requests
import json
import bs4

# 获取栏目主页信息
def handle_page(page):
    headers = {
        "User-Agent": "okhttp/4.1.0",
    }
    # 你可以选择一个栏目进行爬取
    #url = "https://api.qz100.com/api-cpp/recommend_news?second_category=6&page={}&categeory=1&page_size=20".format(page)
    url = "https://api.qz100.com/api-cpp/recommend_news?second_category=7&page={}&category=1&type=0&page_size=20".format(page)
    #url = "https://api.qz100.com/api-cpp/recommend_news?second_category=8&page={}&categeory=1&page_size=20".format(page)
    #url = "https://api.qz100.com/api-cpp/recommend_news?second_category=9&page={}&categeory=1&page_size=20".format(page)
    print("-------主页-------------")
    print(url)
    res = requests.get(url=url,headers=headers).text
    res_dict = json.loads(res)
    #print(res_dict)
    #{'status': 200, 'result': {'current_page': 1, 'data': [{'info_type': 0, 'second_category': 6, 'abstract': '', 'title': '神仙985盘点：这几所复试线低于国家线', 'uuid': '85c5ee99fc6b47789bd95c3e3e119faa', 'cover': 'https://image.kmf.com/api-cpp/02/8f/028f06b023a8f2cd82dd7548a404ecb0.jpeg?x-oss-process=image/resize,w_200/format,png', 'category': 1, 'publish_status': 2, 'id': '1545256', 'tenant': {'id': 'acf91c96-b3fd-4b00-a89f-88f1c55a10a9', 'name': '考研帮', 'type_id': '1', 'avatar': 'https://image.kmf.com/api-cpp/d6/a8/d6a88e4861949c89ab63f1b456be64c7.png', 'senior_id': 0, 'senior_major_name': '', 'senior_school_name': ''}, 'author': {'name': '网络'}, 'tags': [{'name': '择校择专业', 'id': 6}], 'cover_scale': '1:1', 'cover_origin': 'https://image.kmf.com/api-cpp/ht/tp/https://image.kmf.com/api-cpp/02/8f/028f06b023a8f2cd82dd7548a404ecb0.jpeg?x-oss-process=image/resize,w_200/format,png', 'publish_date': '2023-02-14 17:47:26', 'publish_update': '2023-02-14 17:47:26', 'detail_url': 'https://harbor.qz100.com/a/?id=85c5ee99fc6b47789bd95c3e3e119faa', 'share_url': 'https://harbor.qz100.com/a/?id=85c5ee99fc6b47789bd95c3e3e119faa', 'video': None, 'second_category_name': '择校择专业'}, {'info_type': 0, 'second_category': 6, 'abstract': '摘要：教育部文件指出：全日制研究生与非全日制研究生，均通过国家统一考试进行选拔，考试招生依据国际统一要求，执行相同的政策和标准。教学', 'title': '全日制vs非全日制：你将如何选择？', 'uuid': 'fde83332300545b0b2b707ea12d3bc87', 'cover': 'https://image.kmf.com/api-cpp/d4/94/d49461bb0d736fa19200e4e9f61ce336.jpeg?x-oss-process=image/resize,w_200/format,png', 'category': 1, 'publish_status': 2, 'id': '1344824', 'tenant': {'id': 'acf91c96-b3fd-4b00-a89f-88f1c55a10a9', 'name': '考研帮', 'type_id': '1', 'avatar': 'https://image.kmf.com/api-cpp/d6/a8/d6a88e4861949c89ab63f1b456be64c7.png', 'senior_id': 0, 'senior_major_name': '', 'senior_school_name': ''}, 'author': {'name': '考研帮综合整理'}, 'tags': [{'name': '择校择专业', 'id': 6}], 'cover_scale': '1:1', 'cover_origin': 'https://image.kmf.com/api-cpp/ht/tp/https://image.kmf.com/api-cpp/d4/94/d49461bb0d736fa19200e4e9f61ce336.jpeg?x-oss-process=image/resize,w_200/format,png', 'publish_date': '2019-06-06 14:44:33', 'publish_update': '2023-01-16 19:02:02', 'detail_url': 'https://harbor.qz100.com/a/?id=fde83332300545b0b2b707ea12d3bc87', 'share_url': 'https://harbor.qz100.com/a/?id=fde83332300545b0b2b707ea12d3bc87', 'video': None, 'second_category_name': '择校择专业'}, {'info_type': 0, 'second_category': 6, 'abstract': '摘要：研究生招生按照毕业后就业方式的不同可以分为定向和非定向就业，那么它们之间的区别在哪里呢？培养方式有哪些不同？以及两者该如何选择', 'title': '考研解惑：定向与非定向就业注意事项', 'uuid': 'aae216305eb54a5ca45a3805810aefe5', 'cover': 'https://image.kmf.com/api-cpp/d8/0e/d80e216bd5050ffbe3da7d566c655d0c.jpeg?x-oss-process=image/resize,w_200/format,png', 'category': 1, 'publish_status': 2, 'id': '1342253', 'tenant': {'id': 'acf91c96-b3fd-4b00-a89f-88f1c55a10a9', 'name': '考研帮', 'type_id': '1', 'avatar': 'https://image.kmf.com/api-cpp/d6/a8/d6a88e4861949c89ab63f1b456be64c7.png', 'senior_id': 0, 'senior_major_name': '', 'senior_school_name': ''}, 'author': {'name': '考研帮综合整理'}, 'tags': [{'name': '择校择专业', 'id': 6}], 'cover_scale': '1:1', 'cover_origin': 'https://image.kmf.com/api-cpp/ht/tp/https://image.kmf.com/api-cpp/d8/0e/d80e216bd5050ffbe3da7d566c655d0c.jpeg?x-oss-process=image/resize,w_200/format,png', 'publish_date': '2019-05-09 17:29:00', 'publish_update': '2023-01-16 19:00:59', 'detail_url': 'https://harbor.qz100.com/a/?id=aae216305eb54a5ca45a3805810aefe5', 'share_url': 'https://harbor.qz100.com/a/?id=aae216305eb54a5ca45a3805810aefe5', 'video': None, 'second_category_name': '择校择专业'}, {'info_type': 0, 'second_category': 6, 'abstract': '', 'title': '考研初试成绩占比70%的院校汇总！复试压力小！', 'uuid': 'f8caa1536bc24585a946437a8a740ab6', 'cover': 'https://image.kmf.com/api-cpp/44/ab/44ab8a6ae2756dbef36c763ef4220df6.jpg?x-oss-process=image/resize,w_200/format,png', 'category': 1, 'publish_status': 2, 'id': '1544575', 'tenant': {'id': 'acf91c96-b3fd-4b00-a89f-88f1c55a10a9', 'name': '考研帮', 'type_id': '1', 'avatar': 'https://image.kmf.com/api-cpp/d6/a8/d6a88e4861949c89ab63f1b456be64c7.png', 'senior_id': 0, 'senior_major_name': '', 'senior_school_name': ''}, 'author': {'name': '考研帮'}, 'tags': [{'name': '择校择专业', 'id': 6}], 'cover_scale': '1:1', 'cover_origin': 'https://image.kmf.com/api-cpp/ht/tp/https://image.kmf.com/api-cpp/44/ab/44ab8a6ae2756dbef36c763ef4220df6.jpg?x-oss-process=image/resize,w_200/format,png', 'publish_date': '2023-01-06 10:09:59', 'publish_update': '2023-01-06 10:09:59', 'detail_url': 'https://harbor.qz100.com/a/?id=f8caa1536bc24585a946437a8a740ab6', 'share_url': 'https://harbor.qz100.com/a/?id=f8caa1536bc24585a946437a8a740ab6', 'video': None, 'second_category_name': '择校择专业'}, {'info_type': 0, 'second_category': 6, 'abstract': '', 'title': '神仙院校！这些院校保护一志愿！', 'uuid': '582e949ca4a24c64b735d521ab904f1c', 'cover': 'https://image.kmf.com/api-cpp/a9/e3/a9e34724b3b92a7db026c5704e6ef0dc.jpg?x-oss-process=image/resize,w_200/format,png', 'category': 1, 'publish_status': 2, 'id': '1542698', 'tenant': {'id': 'acf91c96-b3fd-4b00-a89f-88f1c55a10a9', 'name': '考研帮', 'type_id': '1', 'avatar': 'https://image.kmf.com/api-cpp/d6/a8/d6a88e4861949c89ab63f1b456be64c7.png', 'senior_id': 0, 'senior_major_name': '', 'senior_school_name': ''}, 'author': {'name': '考研帮'}, 'tags': [{'name': '择校择专业', 'id': 6}], 'cover_scale': '1:1', 'cover_origin': 'https://image.kmf.com/api-cpp/ht/tp/https://image.kmf.com/api-cpp/a9/e3/a9e34724b3b92a7db026c5704e6ef0dc.jpg?x-oss-process=image/resize,w_200/format,png', 'publish_date': '2022-11-22 11:15:28', 'publish_update': '2022-11-22 11:15:28', 'detail_url': 'https://harbor.qz100.com/a/?id=582e949ca4a24c64b735d521ab904f1c', 'share_url': 'https://harbor.qz100.com/a/?id=582e949ca4a24c64b735d521ab904f1c', 'video': None, 'second_category_name': '择校择专业'}, {'info_type': 0, 'second_category': 6, 'abstract': '', 'title': '考研人如何三步搞定择校择专业！', 'uuid': '0f91221d72064103b913f383298d3c33', 'cover': 'https://image.kmf.com/api-cpp/a9/e3/a9e34724b3b92a7db026c5704e6ef0dc.jpg?x-oss-process=image/resize,w_200/format,png', 'category': 1, 'publish_status': 2, 'id': '1542377', 'tenant': {'id': 'acf91c96-b3fd-4b00-a89f-88f1c55a10a9', 'name': '考研帮', 'type_id': '1', 'avatar': 'https://image.kmf.com/api-cpp/d6/a8/d6a88e4861949c89ab63f1b456be64c7.png', 'senior_id': 0, 'senior_major_name': '', 'senior_school_name': ''}, 'author': {'name': '考研帮'}, 'tags': [{'name': '择校择专业', 'id': 6}], 'cover_scale': '1:1', 'cover_origin': 'https://image.kmf.com/api-cpp/ht/tp/https://image.kmf.com/api-cpp/a9/e3/a9e34724b3b92a7db026c5704e6ef0dc.jpg?x-oss-process=image/resize,w_200/format,png', 'publish_date': '2022-11-14 12:14:57', 'publish_update': '2022-11-14 12:14:57', 'detail_url': 'https://harbor.qz100.com/a/?id=0f91221d72064103b913f383298d3c33', 'share_url': 'https://harbor.qz100.com/a/?id=0f91221d72064103b913f383298d3c33', 'video': None, 'second_category_name': '择校择专业'}, {'info_type': 0, 'second_category': 6, 'abstract': '', 'title': '热门专业vs热门院校，应该怎么选？\u200b', 'uuid': 'c145710877ac45c59309f9498f39435c', 'cover': 'https://image.kmf.com/api-cpp/a9/e3/a9e34724b3b92a7db026c5704e6ef0dc.jpg?x-oss-process=image/resize,w_200/format,png', 'category': 1, 'publish_status': 2, 'id': '1542375', 'tenant': {'id': 'acf91c96-b3fd-4b00-a89f-88f1c55a10a9', 'name': '考研帮', 'type_id': '1', 'avatar': 'https://image.kmf.com/api-cpp/d6/a8/d6a88e4861949c89ab63f1b456be64c7.png', 'senior_id': 0, 'senior_major_name': '', 'senior_school_name': ''}, 'author': {'name': '考研帮'}, 'tags': [{'name': '择校择专业', 'id': 6}], 'cover_scale': '1:1', 'cover_origin': 'https://image.kmf.com/api-cpp/ht/tp/https://image.kmf.com/api-cpp/a9/e3/a9e34724b3b92a7db026c5704e6ef0dc.jpg?x-oss-process=image/resize,w_200/format,png', 'publish_date': '2022-11-14 12:07:32', 'publish_update': '2022-11-14 12:07:24', 'detail_url': 'https://harbor.qz100.com/a/?id=c145710877ac45c59309f9498f39435c', 'share_url': 'https://harbor.qz100.com/a/?id=c145710877ac45c59309f9498f39435c', 'video': None, 'second_category_name': '择校择专业'}, {'info_type': 0, 'second_category': 6, 'abstract': '', 'title': '考研择校你需要知道的四个数据！', 'uuid': '7e63e2d4065d434396dde9f9fd2483fa', 'cover': 'https://image.kmf.com/api-cpp/f6/24/f624ae022c8e09fe553ccde9c919f8e0.jpeg?x-oss-process=image/resize,w_200/format,png', 'category': 1, 'publish_status': 2, 'id': '1542373', 'tenant': {'id': 'acf91c96-b3fd-4b00-a89f-88f1c55a10a9', 'name': '考研帮', 'type_id': '1', 'avatar': 'https://image.kmf.com/api-cpp/d6/a8/d6a88e4861949c89ab63f1b456be64c7.png', 'senior_id': 0, 'senior_major_name': '', 'senior_school_name': ''}, 'author': {'name': '考研帮'}, 'tags': [{'name': '择校择专业', 'id': 6}], 'cover_scale': '1:1', 'cover_origin': 'https://image.kmf.com/api-cpp/ht/tp/https://image.kmf.com/api-cpp/f6/24/f624ae022c8e09fe553ccde9c919f8e0.jpeg?x-oss-process=image/resize,w_200/format,png', 'publish_date': '2022-11-14 11:54:57', 'publish_update': '2022-11-14 11:54:57', 'detail_url': 'https://harbor.qz100.com/a/?id=7e63e2d4065d434396dde9f9fd2483fa', 'share_url': 'https://harbor.qz100.com/a/?id=7e63e2d4065d434396dde9f9fd2483fa', 'video': None, 'second_category_name': '择校择专业'}, {'info_type': 0, 'second_category': 6, 'abstract': '', 'title': '逃离考研择校常见误区，用大数据确定考研院校！', 'uuid': '1edad3eb7813451f8933b4dd28fab600', 'cover': 'https://image.kmf.com/api-cpp/f6/24/f624ae022c8e09fe553ccde9c919f8e0.jpeg?x-oss-process=image/resize,w_200/format,png', 'category': 1, 'publish_status': 2, 'id': '1541999', 'tenant': {'id': 'acf91c96-b3fd-4b00-a89f-88f1c55a10a9', 'name': '考研帮', 'type_id': '1', 'avatar': 'https://image.kmf.com/api-cpp/d6/a8/d6a88e4861949c89ab63f1b456be64c7.png', 'senior_id': 0, 'senior_major_name': '', 'senior_school_name': ''}, 'author': {'name': '考研帮'}, 'tags': [{'name': '择校择专业', 'id': 6}], 'cover_scale': '1:1', 'cover_origin': 'https://image.kmf.com/api-cpp/ht/tp/https://image.kmf.com/api-cpp/f6/24/f624ae022c8e09fe553ccde9c919f8e0.jpeg?x-oss-process=image/resize,w_200/format,png', 'publish_date': '2022-10-31 15:39:54', 'publish_update': '2022-10-31 15:39:54', 'detail_url': 'https://harbor.qz100.com/a/?id=1edad3eb7813451f8933b4dd28fab600', 'share_url': 'https://harbor.qz100.com/a/?id=1edad3eb7813451f8933b4dd28fab600', 'video': None, 'second_category_name': '择校择专业'}, {'info_type': 0, 'second_category': 6, 'abstract': '', 'title': '最适合读研的8所城市，有你喜欢的吗？', 'uuid': '4a8e63663b174eb6b3d7b8ad3b53c841', 'cover': 'https://image.kmf.com/api-cpp/a0/79/a079cbaa863907404f0c59c88abd3a55.jpg?x-oss-process=image/resize,w_200/format,png', 'category': 1, 'publish_status': 2, 'id': '1541992', 'tenant': {'id': 'acf91c96-b3fd-4b00-a89f-88f1c55a10a9', 'name': '考研帮', 'type_id': '1', 'avatar': 'https://image.kmf.com/api-cpp/d6/a8/d6a88e4861949c89ab63f1b456be64c7.png', 'senior_id': 0, 'senior_major_name': '', 'senior_school_name': ''}, 'author': {'name': '考研帮'}, 'tags': [{'name': '择校择专业', 'id': 6}], 'cover_scale': '1:1', 'cover_origin': 'https://image.kmf.com/api-cpp/ht/tp/https://image.kmf.com/api-cpp/a0/79/a079cbaa863907404f0c59c88abd3a55.jpg?x-oss-process=image/resize,w_200/format,png', 'publish_date': '2022-10-31 15:09:03', 'publish_update': '2022-10-31 15:09:03', 'detail_url': 'https://harbor.qz100.com/a/?id=4a8e63663b174eb6b3d7b8ad3b53c841', 'share_url': 'https://harbor.qz100.com/a/?id=4a8e63663b174eb6b3d7b8ad3b53c841', 'video': None, 'second_category_name': '择校择专业'}, {'info_type': 0, 'second_category': 6, 'abstract': '', 'title': '34所自划线院校2023年研究生学费一览表', 'uuid': '7a9eba9733b346e0b69dffdf5aed5113', 'cover': 'https://image.kmf.com/api-cpp/45/b4/45b4f99d95183a70042011e3ee015f5b.jpeg?x-oss-process=image/resize,w_200/format,png', 'category': 1, 'publish_status': 2, 'id': '1541575', 'tenant': {'id': 'acf91c96-b3fd-4b00-a89f-88f1c55a10a9', 'name': '考研帮', 'type_id': '1', 'avatar': 'https://image.kmf.com/api-cpp/d6/a8/d6a88e4861949c89ab63f1b456be64c7.png', 'senior_id': 0, 'senior_major_name': '', 'senior_school_name': ''}, 'author': {'name': '考研帮'}, 'tags': [{'name': '择校择专业', 'id': 6}, {'name': '一战', 'id': 3557}], 'cover_scale': '1:1', 'cover_origin': 'https://image.kmf.com/api-cpp/ht/tp/https://image.kmf.com/api-cpp/45/b4/45b4f99d95183a70042011e3ee015f5b.jpeg?x-oss-process=image/resize,w_200/format,png', 'publish_date': '2022-10-18 11:50:36', 'publish_update': '2022-10-18 11:50:36', 'detail_url': 'https://harbor.qz100.com/a/?id=7a9eba9733b346e0b69dffdf5aed5113', 'share_url': 'https://harbor.qz100.com/a/?id=7a9eba9733b346e0b69dffdf5aed5113', 'video': None, 'second_category_name': '择校择专业'}, {'info_type': 0, 'second_category': 6, 'abstract': '', 'title': '考研择校|400+一大片的这些学校，你报考了吗', 'uuid': 'fa56d7ce95f448799880fd09e392705e', 'cover': 'https://image.kmf.com/api-cpp/f6/24/f624ae022c8e09fe553ccde9c919f8e0.jpeg?x-oss-process=image/resize,w_200/format,png', 'category': 1, 'publish_status': 2, 'id': '1541572', 'tenant': {'id': 'acf91c96-b3fd-4b00-a89f-88f1c55a10a9', 'name': '考研帮', 'type_id': '1', 'avatar': 'https://image.kmf.com/api-cpp/d6/a8/d6a88e4861949c89ab63f1b456be64c7.png', 'senior_id': 0, 'senior_major_name': '', 'senior_school_name': ''}, 'author': {'name': '考研帮'}, 'tags': [{'name': '择校择专业', 'id': 6}, {'name': '一战', 'id': 3557}], 'cover_scale': '1:1', 'cover_origin': 'https://image.kmf.com/api-cpp/ht/tp/https://image.kmf.com/api-cpp/f6/24/f624ae022c8e09fe553ccde9c919f8e0.jpeg?x-oss-process=image/resize,w_200/format,png', 'publish_date': '2022-10-18 11:42:44', 'publish_update': '2022-10-18 11:42:44', 'detail_url': 'https://harbor.qz100.com/a/?id=fa56d7ce95f448799880fd09e392705e', 'share_url': 'https://harbor.qz100.com/a/?id=fa56d7ce95f448799880fd09e392705e', 'video': None, 'second_category_name': '择校择专业'}, {'info_type': 0, 'second_category': 6, 'abstract': '', 'title': '读研比例最高的12大专业，第一名依旧稳！', 'uuid': 'd88f3dd5534e4aca9f8568516d712201', 'cover': 'https://image.kmf.com/api-cpp/f6/24/f624ae022c8e09fe553ccde9c919f8e0.jpeg?x-oss-process=image/resize,w_200/format,png', 'category': 1, 'publish_status': 2, 'id': '1541565', 'tenant': {'id': 'acf91c96-b3fd-4b00-a89f-88f1c55a10a9', 'name': '考研帮', 'type_id': '1', 'avatar': 'https://image.kmf.com/api-cpp/d6/a8/d6a88e4861949c89ab63f1b456be64c7.png', 'senior_id': 0, 'senior_major_name': '', 'senior_school_name': ''}, 'author': {'name': '考研帮'}, 'tags': [{'name': '择校择专业', 'id': 6}, {'name': '一战', 'id': 3557}], 'cover_scale': '1:1', 'cover_origin': 'https://image.kmf.com/api-cpp/ht/tp/https://image.kmf.com/api-cpp/f6/24/f624ae022c8e09fe553ccde9c919f8e0.jpeg?x-oss-process=image/resize,w_200/format,png', 'publish_date': '2022-10-18 11:06:42', 'publish_update': '2022-10-18 11:06:42', 'detail_url': 'https://harbor.qz100.com/a/?id=d88f3dd5534e4aca9f8568516d712201', 'share_url': 'https://harbor.qz100.com/a/?id=d88f3dd5534e4aca9f8568516d712201', 'video': None, 'second_category_name': '择校择专业'}, {'info_type': 0, 'second_category': 6, 'abstract': '', 'title': '考研报考重灾区！这些院校去年报考人数破万！', 'uuid': '2a2ea9688c374f98ac1cb2c76d4d98c5', 'cover': 'https://image.kmf.com/api-cpp/f6/24/f624ae022c8e09fe553ccde9c919f8e0.jpeg?x-oss-process=image/resize,w_200/format,png', 'category': 1, 'publish_status': 2, 'id': '1541396', 'tenant': {'id': 'acf91c96-b3fd-4b00-a89f-88f1c55a10a9', 'name': '考研帮', 'type_id': '1', 'avatar': 'https://image.kmf.com/api-cpp/d6/a8/d6a88e4861949c89ab63f1b456be64c7.png', 'senior_id': 0, 'senior_major_name': '', 'senior_school_name': ''}, 'author': {'name': '考研帮'}, 'tags': [{'name': '择校择专业', 'id': 6}, {'name': '一战', 'id': 3557}], 'cover_scale': '1:1', 'cover_origin': 'https://image.kmf.com/api-cpp/ht/tp/https://image.kmf.com/api-cpp/f6/24/f624ae022c8e09fe553ccde9c919f8e0.jpeg?x-oss-process=image/resize,w_200/format,png', 'publish_date': '2022-10-17 11:21:18', 'publish_update': '2022-10-17 11:21:18', 'detail_url': 'https://harbor.qz100.com/a/?id=2a2ea9688c374f98ac1cb2c76d4d98c5', 'share_url': 'https://harbor.qz100.com/a/?id=2a2ea9688c374f98ac1cb2c76d4d98c5', 'video': None, 'second_category_name': '择校择专业'}, {'info_type': 0, 'second_category': 6, 'abstract': '', 'title': '考研择校的五点建议', 'uuid': '6ab2011e428f422d92d13af4231e74bd', 'cover': 'https://image.kmf.com/api-cpp/f6/24/f624ae022c8e09fe553ccde9c919f8e0.jpeg?x-oss-process=image/resize,w_200/format,png', 'category': 1, 'publish_status': 2, 'id': '1541116', 'tenant': {'id': 'acf91c96-b3fd-4b00-a89f-88f1c55a10a9', 'name': '考研帮', 'type_id': '1', 'avatar': 'https://image.kmf.com/api-cpp/d6/a8/d6a88e4861949c89ab63f1b456be64c7.png', 'senior_id': 0, 'senior_major_name': '', 'senior_school_name': ''}, 'author': {'name': '考研帮'}, 'tags': [{'name': '择校择专业', 'id': 6}, {'name': '一战', 'id': 3557}], 'cover_scale': '1:1', 'cover_origin': 'https://image.kmf.com/api-cpp/ht/tp/https://image.kmf.com/api-cpp/f6/24/f624ae022c8e09fe553ccde9c919f8e0.jpeg?x-oss-process=image/resize,w_200/format,png', 'publish_date': '2022-10-08 12:24:55', 'publish_update': '2022-10-08 12:24:55', 'detail_url': 'https://harbor.qz100.com/a/?id=6ab2011e428f422d92d13af4231e74bd', 'share_url': 'https://harbor.qz100.com/a/?id=6ab2011e428f422d92d13af4231e74bd', 'video': None, 'second_category_name': '择校择专业'}, {'info_type': 0, 'second_category': 6, 'abstract': '', 'title': '看完顿悟！硬核考研择校攻略！', 'uuid': '06b04179cc6d4874bdbf443ca3bd197f', 'cover': 'https://image.kmf.com/api-cpp/45/b4/45b4f99d95183a70042011e3ee015f5b.jpeg?x-oss-process=image/resize,w_200/format,png', 'category': 1, 'publish_status': 2, 'id': '1541115', 'tenant': {'id': 'acf91c96-b3fd-4b00-a89f-88f1c55a10a9', 'name': '考研帮', 'type_id': '1', 'avatar': 'https://image.kmf.com/api-cpp/d6/a8/d6a88e4861949c89ab63f1b456be64c7.png', 'senior_id': 0, 'senior_major_name': '', 'senior_school_name': ''}, 'author': {'name': '考研帮'}, 'tags': [{'name': '择校择专业', 'id': 6}, {'name': '一战', 'id': 3557}], 'cover_scale': '1:1', 'cover_origin': 'https://image.kmf.com/api-cpp/ht/tp/https://image.kmf.com/api-cpp/45/b4/45b4f99d95183a70042011e3ee015f5b.jpeg?x-oss-process=image/resize,w_200/format,png', 'publish_date': '2022-10-08 12:23:29', 'publish_update': '2022-10-08 12:23:29', 'detail_url': 'https://harbor.qz100.com/a/?id=06b04179cc6d4874bdbf443ca3bd197f', 'share_url': 'https://harbor.qz100.com/a/?id=06b04179cc6d4874bdbf443ca3bd197f', 'video': None, 'second_category_name': '择校择专业'}, {'info_type': 0, 'second_category': 6, 'abstract': '', 'title': '为什么越来越多的人选择“降级考研”？', 'uuid': '2477d055d43041b1a506ae4242298224', 'cover': 'https://image.kmf.com/api-cpp/45/b4/45b4f99d95183a70042011e3ee015f5b.jpeg?x-oss-process=image/resize,w_200/format,png', 'category': 1, 'publish_status': 2, 'id': '1540275', 'tenant': {'id': 'acf91c96-b3fd-4b00-a89f-88f1c55a10a9', 'name': '考研帮', 'type_id': '1', 'avatar': 'https://image.kmf.com/api-cpp/d6/a8/d6a88e4861949c89ab63f1b456be64c7.png', 'senior_id': 0, 'senior_major_name': '', 'senior_school_name': ''}, 'author': {'name': '考研帮'}, 'tags': [{'name': '择校择专业', 'id': 6}, {'name': '一战', 'id': 3557}], 'cover_scale': '1:1', 'cover_origin': 'https://image.kmf.com/api-cpp/ht/tp/https://image.kmf.com/api-cpp/45/b4/45b4f99d95183a70042011e3ee015f5b.jpeg?x-oss-process=image/resize,w_200/format,png', 'publish_date': '2022-09-19 14:04:22', 'publish_update': '2022-09-19 14:04:22', 'detail_url': 'https://harbor.qz100.com/a/?id=2477d055d43041b1a506ae4242298224', 'share_url': 'https://harbor.qz100.com/a/?id=2477d055d43041b1a506ae4242298224', 'video': None, 'second_category_name': '择校择专业'}, {'info_type': 0, 'second_category': 6, 'abstract': '', 'title': '考研择校的843法则！', 'uuid': 'fa611db481d44a3cb1a52a85f5ca33f3', 'cover': 'https://image.kmf.com/api-cpp/f6/24/f624ae022c8e09fe553ccde9c919f8e0.jpeg?x-oss-process=image/resize,w_200/format,png', 'category': 1, 'publish_status': 2, 'id': '1540274', 'tenant': {'id': 'acf91c96-b3fd-4b00-a89f-88f1c55a10a9', 'name': '考研帮', 'type_id': '1', 'avatar': 'https://image.kmf.com/api-cpp/d6/a8/d6a88e4861949c89ab63f1b456be64c7.png', 'senior_id': 0, 'senior_major_name': '', 'senior_school_name': ''}, 'author': {'name': '考研帮'}, 'tags': [{'name': '择校择专业', 'id': 6}, {'name': '一战', 'id': 3557}], 'cover_scale': '1:1', 'cover_origin': 'https://image.kmf.com/api-cpp/ht/tp/https://image.kmf.com/api-cpp/f6/24/f624ae022c8e09fe553ccde9c919f8e0.jpeg?x-oss-process=image/resize,w_200/format,png', 'publish_date': '2022-09-19 14:01:18', 'publish_update': '2022-09-19 14:01:18', 'detail_url': 'https://harbor.qz100.com/a/?id=fa611db481d44a3cb1a52a85f5ca33f3', 'share_url': 'https://harbor.qz100.com/a/?id=fa611db481d44a3cb1a52a85f5ca33f3', 'video': None, 'second_category_name': '择校择专业'}, {'info_type': 0, 'second_category': 6, 'abstract': '', 'title': '预报名的相关科普和注意事项 ', 'uuid': 'b25a13a54ee34eb7a44d919cda2ea258', 'cover': 'https://image.kmf.com/api-cpp/21/61/21611f82c9b066d292db20b693712c75.jpeg?x-oss-process=image/resize,w_200/format,png', 'category': 1, 'publish_status': 2, 'id': '1540257', 'tenant': {'id': 'acf91c96-b3fd-4b00-a89f-88f1c55a10a9', 'name': '考研帮', 'type_id': '1', 'avatar': 'https://image.kmf.com/api-cpp/d6/a8/d6a88e4861949c89ab63f1b456be64c7.png', 'senior_id': 0, 'senior_major_name': '', 'senior_school_name': ''}, 'author': {'name': '考研帮'}, 'tags': [{'name': '择校择专业', 'id': 6}, {'name': '一战', 'id': 3557}], 'cover_scale': '1:1', 'cover_origin': 'https://image.kmf.com/api-cpp/ht/tp/https://image.kmf.com/api-cpp/21/61/21611f82c9b066d292db20b693712c75.jpeg?x-oss-process=image/resize,w_200/format,png', 'publish_date': '2022-09-19 11:34:39', 'publish_update': '2022-09-19 11:34:39', 'detail_url': 'https://harbor.qz100.com/a/?id=b25a13a54ee34eb7a44d919cda2ea258', 'share_url': 'https://harbor.qz100.com/a/?id=b25a13a54ee34eb7a44d919cda2ea258', 'video': None, 'second_category_name': '择校择专业'}, {'info_type': 0, 'second_category': 6, 'abstract': '', 'title': '预报名的相关科普和注意事项 ', 'uuid': 'a07ae6e9653c4f9eb02b448e3c34b80c', 'cover': 'https://image.kmf.com/api-cpp/21/61/21611f82c9b066d292db20b693712c75.jpeg?x-oss-process=image/resize,w_200/format,png', 'category': 1, 'publish_status': 2, 'id': '1540256', 'tenant': {'id': 'acf91c96-b3fd-4b00-a89f-88f1c55a10a9', 'name': '考研帮', 'type_id': '1', 'avatar': 'https://image.kmf.com/api-cpp/d6/a8/d6a88e4861949c89ab63f1b456be64c7.png', 'senior_id': 0, 'senior_major_name': '', 'senior_school_name': ''}, 'author': {'name': '考研帮'}, 'tags': [{'name': '择校择专业', 'id': 6}, {'name': '一战', 'id': 3557}], 'cover_scale': '1:1', 'cover_origin': 'https://image.kmf.com/api-cpp/ht/tp/https://image.kmf.com/api-cpp/21/61/21611f82c9b066d292db20b693712c75.jpeg?x-oss-process=image/resize,w_200/format,png', 'publish_date': '2022-09-19 11:34:32', 'publish_update': '2022-09-19 11:34:32', 'detail_url': 'https://harbor.qz100.com/a/?id=a07ae6e9653c4f9eb02b448e3c34b80c', 'share_url': 'https://harbor.qz100.com/a/?id=a07ae6e9653c4f9eb02b448e3c34b80c', 'video': None, 'second_category_name': '择校择专业'}], 'from': 1, 'last_page': 113, 'path': '/', 'per_page': 20, 'to': 20, 'total': 2250}, 'message': 'OK'}
    return res

# 获取详情页信息
def handel_request(url):
    #url   GET https://harbor.qz100.com/a/?id=1c7dcfb91e164b3a854f80f60d019175
    headers = {
        "User-Agent": "okhttp/4.1.0",
    }
    response = requests.get(url=url,headers=headers)
    #print(response.text)
    print("详情页")
    print("正在访问"+url)
    link_soup = bs4.BeautifulSoup(response.text, "html.parser")
    links = link_soup.find_all("div", class_="content")
    mytext = ""
    #print(links)
    for item in links:
        #print(item.get_text())
        mytext = mytext + item.get_text()
    return mytext


if __name__=='__main__':
    allindo = []
    try:
        i = 1
        while True:
            res = handle_page(i)
            response = json.loads(res)
            data = response['result']['data']
            for item in data:
                kaoyan_info = {}
                kaoyan_info['标题'] = item['title']
                kaoyan_info['日期'] = item['publish_update']
                kaoyan_info['发帖人'] = item['tenant']['name']
                kaoyan_info['文章id'] = item['uuid']
                kaoyan_info['文章网址'] = 'https://harbor.qz100.com/a/?id={}'.format(item['uuid'])
                kaoyan_info['摘要'] = item['abstract']
                kaoyan_info['正文'] = handel_request(kaoyan_info['文章网址'])
                from pymongo import MongoClient

                # 建立连接
                client = MongoClient('mongodb://localhost:27017/')

                # 创建数据库
                db = client['mydatabase']

                # 插入数据
                collection = db['kaoyanbang_no']
                result = collection.insert_one(kaoyan_info)

                # 关闭连接
                client.close()
                allindo.append(kaoyan_info)

            i = i + 1
    except:
        print("结束了")

    #print(allindo)
    # handel_request('https://harbor.qz100.com/a/?id=04fa4fe96c0741009aa781d4973c4c21')#详情页处理